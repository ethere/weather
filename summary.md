单页面，6个模块，分别为选择城市模块，实时天气模块，24小时天气模块，近7日天气模块，生活指数模块，尾部信息模块

使用vue作为框架，并使用脚手架vue-cli搭建，其中，使用vuex处理共享数据；后端部分使用了阿里云上的易源数据-全国天气预报查询提供接口，通过axios来访问到天气数据

## 选择城市模块

搜索或选择城市后，使用vuex中dispatch来触发actions中的方法，异步获取到数据后再更新天气数据

使用了h5中的HTML5 LocalStorage 本地存储来存储关注城市列表数据和默认加载的城市，在vue生命周期钩子函数created中会获取到关注城市列表和默认加载城市的数据

遇到的难点：
    关注城市列表显示与隐藏的切换，在移出当前地址信息后短时间更移入了关注城市列表容器不隐藏，最后使用了定时器来实现功能，移出时设置定时器，当在短时间内移入了关注城市列表容器则清除定时器

## 实时天气模块

两个较复杂的点：

1. 空气质量指数样式和图标的切换

根据当前的空气质量指数更换所在区域的背景颜色和图标位置

2. 根据风向来加载不同的图标

这两个点都是用js来添加的样式，使用了映射对象，根据对应的信息返回对应的图标位置和背景颜色值。对于非天气图标使用的是精灵图，因此更改对应的背景图片位置即可。

## 24小时天气模块

将获取到的数据进行处理，并将日出和日落的数据添加到列表中，渲染即可

css样式方面，滑动的效果使用了transition和transform:translateX()来实现

## 近7天天气模块

复杂点是中间的折线部分，通过精确的计算来确定每个温度对应的坐标点

使用了html5中的canvas来绘制折线，描点以及渲染文字。点的位置是是通过，canvas的高度减去两个渲染文字所需要的高度除于最高气温减去最低气温得到每一度温度的刻度值，因为，每一列的宽度为100px且每一列的内容都是居中的，因此x轴的坐标为宽度的一半加上100*i,i为列标（从0开始），y轴绘制最低点的坐标就是容器的高度减去渲染一个文字所需要的高度，而最高点的坐标则是渲染一个文字所需要的高度。y轴的坐标为可绘制的最低点的坐标 减去 所在列的温度减去最小温度乘以刻度值。

## 生活指数模块

主要也是一个滑动效果的实现，移入对应的指数展示对应详情内容，以及点击向右按钮滑动到另一些指数

将容器的宽度设置成可视区的两倍，overflow:hidden，transition:1s,transform:translasteX(50%)

## 问题

天气图标的处理，将地址设置为src/assets/icon来访问对应的图标访问不到，因此通过的是请求网址来获取的图标

## 反思

1. css的命名规范提前确定好

2. 将多次使用到的公共样式抽离出来，减少冗余

3. css的样式文件单独抽离出来

4. 提前构思好，比如：数据的共享的问题

## 待优化

1. 天气图标的请求
2. css部分的规范化